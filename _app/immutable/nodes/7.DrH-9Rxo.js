var Ie=(r,_e,Y)=>new Promise((re,_)=>{var M=R=>{try{F(Y.next(R))}catch(B){_(B)}},Q=R=>{try{F(Y.throw(R))}catch(B){_(B)}},F=R=>R.done?re(R.value):Promise.resolve(R.value).then(M,Q);F((Y=Y.apply(r,_e)).next())});import{a as j,e as ie,f as G,w as St,s as X}from"../chunks/ByHfNYyH.js";import{i as wt}from"../chunks/DPmMxCJa.js";import{o as Dt}from"../chunks/TrlPcG3m.js";import{p as Nt,l as kt,a as xt,b as Mt,g as e,i as Ye,s as N,y as Lt,m as P,h as Qe,c as S,e as v,k as qe,$ as Pt,n as Ae,r as w,u as U,t as Z,z as Je,A as Xe}from"../chunks/MAWq1Bs-.js";import{i as ee}from"../chunks/DRn8owhI.js";import{h as Rt,a as Ot,d as $e,g as zt,s as pe,e as Ze,i as et,b as tt,r as Ft}from"../chunks/D5oqsy_p.js";import{c as me,d as at,a as Bt}from"../chunks/CnrOJzGS.js";import{b as oe}from"../chunks/B8xhrJ_g.js";import{B as Wt,s as z,b as fe,p as ye,d as jt,E as Ut,q as be,g as Gt,a as Ht,t as Vt,f as nt,y as Kt,u as It,P as Yt,S as Qt}from"../chunks/BrECN6iW.js";import{S as qt,t as Jt}from"../chunks/B6FWrDFz.js";import{a as Xt,s as Zt}from"../chunks/D9W9dS64.js";var l=(r=>(r[r.ID=0]="ID",r[r.NAME=1]="NAME",r[r.C1_NAME=2]="C1_NAME",r[r.C2_NAME=3]="C2_NAME",r[r.START=4]="START",r[r.END=5]="END",r[r.C1_ID=6]="C1_ID",r[r.C2_ID=7]="C2_ID",r[r.WIKI=8]="WIKI",r[r.STATUS=9]="STATUS",r[r.CB=10]="CB",r[r.POSTS=11]="POSTS",r[r.SOURCE=12]="SOURCE",r[r.CATEGORY=13]="CATEGORY",r[r.WARS=14]="WARS",r[r.ACTIVE_WARS=15]="ACTIVE_WARS",r[r.C1_DEALT=16]="C1_DEALT",r[r.C2_DEALT=17]="C2_DEALT",r[r.TOTAL=18]="TOTAL",r))(l||{}),ea=St(G('<script id="visjs" async="" src="https://cdnjs.cloudflare.com/ajax/libs/vis-timeline/7.7.3/vis-timeline-graph2d.min.js"><\/script><!>',1)),ta=G("<option> </option>"),aa=G('<div class="d-inline-block ms-auto"><div class="input-group ux-inputbar"><label for="source" class="fw-bold input-group-text">Source:</label> <select class="form-select form-select-sm fw-bold"><option>All</option><!></select> <a class="btn ux-btn fw-bold" href="http://locutus.link/#/command/conflict%20create_temp" target="_blank" rel="noopener noreferrer">Create Conflict</a></div></div>'),na=G('<div class="alert alert-danger m-2 d-flex justify-content-between align-items-center"><span> </span> <button class="btn btn-sm btn-outline-danger fw-bold">Retry</button></div>'),sa=G('<button title="Toggle category"> <span class="badge text-bg-light ms-1"> </span></button>'),la=G('<span class="ux-muted ms-2">Pinned alliance badges:</span> <span class="badge text-bg-primary">C1</span> <span class="badge text-bg-danger">C2</span>',1),ia=G('<div class="ux-surface p-2 mb-2"><div class="d-flex flex-wrap gap-2 align-items-center"><span class="fw-bold">Quick filters:</span> <span class="ux-muted">Category</span> <!> <!></div></div> <div class="d-flex flex-wrap gap-1 mb-2 align-items-center"><button class="btn ux-btn"> </button> <!></div> <!>',1),oa=G('<div class="small text-muted text-end mt-2"> </div>'),ra=G('<div class="container-fluid p-2 ux-page-body"><h1 class="m-0 mb-2 p-2 ux-surface ux-page-title"><div class="ux-page-title-stack"><!> <span class="ux-page-title-main">Conflicts</span></div> <!></h1> <!> <!> <!> <div id="conflictTable" class="inline-block"></div> <div class="ux-surface p-2 mt-2"><h4 class="m-1">Timeline</h4> <p class="ps-1 ux-muted">Use ctrl+mousewheel to zoom on PC</p> <div class="m-0" id="visualization"></div></div> <!></div>');function Aa(r,_e){Nt(_e,!1);const Y=P();let re,_=P(null),M=P(["All",0]),Q=P(!1),F=P(null),R=P(""),B={},Te={},q={},Ee=[],H=P(null),g=P(new Set),te=P(!1),Se=P([]),O=P({}),D=P(new Set);const we=()=>It();Dt(()=>{try{Ot(["ids","guild","guild_id"]),Xt(),z("getIds",(t,a)=>{const s=Te[t][a],o=s.map(i=>fe(B[i],i));return{alliance_ids:s,alliance_names:o}}),z("formatUrl",(t,a,s,o)=>{const i=s[l.ID],c=L(`${t}`);return`<span class='ux-conflict-cell'><a href='${`${oe}/conflict?id=${i}`}' class='btn ux-btn btn-sm fw-bold ux-conflict-name-btn' onclick='return openConflictCardFromName(event,${i})' aria-label='Open conflict details for ${c}' title='Left click: open card • Middle click/right click: open conflict page'>${c}</a></span>`}),z("openConflictCardFromName",(t,a)=>{if(!t){const i=ye("openConflictCard");return i==null||i(void 0,a),!1}if(t.stopPropagation(),!(t.button===0&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey))return!0;t.preventDefault();const o=ye("openConflictCard");return o==null||o(void 0,a),!1}),z("download",function(a,s){jt(document.getElementById("conflictTable").querySelector("table"),a,Ut[s])}),z("openConflictField",(t,a,s)=>{ne(t);const o=q[a];if(!o)return;const i=`${o.name} - ${s.toUpperCase()}`;be(i,Ne(o,s))}),z("openConflictFieldFromCard",(t,a,s)=>{ne(t);const o=q[a];if(!o)return;const i=`${o.name} - ${s.toUpperCase()}`;be(ke(i,a),Ne(o,s))}),z("openCoalitionForConflict",(t,a,s,o=!1)=>{ne(t);const i=q[a];if(!i)return;const c=ye("getIds");if(!c)return;const u=c(i.name,s),h=u.alliance_ids,C=document.createElement("ul");C.className="mb-0";for(let $=0;$<h.length;$++){const T=h[$],y=fe(u.alliance_names[$],T),E=document.createElement("a");E.setAttribute("href",`https://politicsandwar.com/alliance/id=${T}`),E.setAttribute("target","_blank"),E.setAttribute("rel","noopener noreferrer"),E.textContent=y;const k=document.createElement("li");k.appendChild(E),C.appendChild(k)}const p=document.createElement("div"),m=h.join(","),f=document.createElement("kbd");f.textContent=m,f.setAttribute("readonly","true"),f.setAttribute("class","form-control m-0"),p.appendChild(f);const b=`<button class='btn btn-outline-info btn-sm position-absolute top-0 end-0 m-3' onclick='copyToClipboard("${m}")' aria-label='Copy alliance ids'><i class='bi bi-clipboard'></i></button>`;p.innerHTML+=b,p.appendChild(C),be(o?ke(`Coalition ${s+1}: ${i.name}`,a):`Coalition ${s+1}: ${i.name}`,p.outerHTML)}),z("openConflictCard",(t,a)=>{var y,E,k,V,K;ne(t);const s=q[a];if(!s)return;const o=(y=s.wiki)!=null?y:"",i=o.trim().length>0,c=((E=s.status)!=null?E:"").trim().length>0,u=((k=s.cb)!=null?k:"").trim().length>0,h=s.posts&&typeof s.posts=="object",C=i?lt(o):"#",p=`${oe}/conflict?id=${a}`,m=L(s.name),f=((V=s.pinnedInfo)!=null?V:"").trim().length>0,b=`
          <a class='btn ux-btn-primary w-100 fw-bold mb-2' href='${p}' onclick='openConflictPageFromCard(event,${a})' aria-label='Open full conflict page for ${m}'>Open Conflict Page</a>

          <div class='ux-conflict-popup-actions' role='group' aria-label='Conflict actions'>
            <button type='button' class='btn ux-btn fw-bold' onclick='openCoalitionForConflict(event,${a},0,true)' aria-label='Show coalition 1 alliances for ${m}'>C1</button>
            <button type='button' class='btn ux-btn fw-bold' onclick='openCoalitionForConflict(event,${a},1,true)' aria-label='Show coalition 2 alliances for ${m}'>C2</button>
            <button type='button' class='btn ux-btn fw-bold' onclick='openConflictFieldFromCard(event,${a},"status")' ${c?"":"disabled"} aria-label='Open status for ${m}'>Status</button>
            <button type='button' class='btn ux-btn fw-bold' onclick='openConflictFieldFromCard(event,${a},"cb")' ${u?"":"disabled"} aria-label='Open casus belli for ${m}'>CB</button>
            <button type='button' class='btn ux-btn fw-bold' onclick='openConflictFieldFromCard(event,${a},"posts")' ${h?"":"disabled"} aria-label='Open posts for ${m}'>Posts</button>
            <a class='btn ux-btn fw-bold' href='${C}' ${i?"target='_blank' rel='noopener noreferrer'":"aria-disabled='true' tabindex='-1'"} aria-label='Open wiki for ${m} in a new tab'>Wiki</a>
          </div>

          <div class='ux-conflict-popup-meta mt-2' role='group' aria-label='Conflict basic info'>
            <div><span class='ux-muted'>C1:</span> ${L(s.c1Name)}</div>
            <div><span class='ux-muted'>C2:</span> ${L(s.c2Name)}</div>
            <div><span class='ux-muted'>Category:</span> ${L(s.category)}</div>
            <div><span class='ux-muted'>Start:</span> ${L(De(s.start))}</div>
            <div><span class='ux-muted'>End:</span> ${L(De(s.end))}</div>
            <div><span class='ux-muted'>Wars:</span> ${s.wars}</div>
            <div><span class='ux-muted'>Active wars:</span> ${s.activeWars}</div>
            <div><span class='ux-muted'>C1 dealt:</span> ${L(ge(s.c1Dealt))}</div>
            <div><span class='ux-muted'>C2 dealt:</span> ${L(ge(s.c2Dealt))}</div>
            <div><span class='ux-muted'>Total dealt:</span> ${L(ge(s.totalDealt))}</div>
            ${f?`<div><span class='ux-muted'>Pinned:</span> ${L((K=s.pinnedInfo)!=null?K:"")}</div>`:""}
          </div>
        `;be(`${s.name} Details`,b);const $=Gt(String(a),me.version.conflict_data);$e($).catch(()=>{});const T=Ht(String(a),me.version.graph_data);$e(T).catch(()=>{})}),z("openConflictPageFromCard",(t,a)=>{var i;ne(t);const s=document.getElementById("exampleModal"),o=Vt(s);(i=o==null?void 0:o.hide)==null||i.call(o),window.setTimeout(()=>{window.location.href=`${oe}/conflict?id=${a}`},80)}),z("formatPinnedAlliances",(t,a,s,o)=>{var f;if(e(g).size===((f=e(_))==null?void 0:f.alliance_ids.length))return"";const i=s[l.C1_ID],c=s[l.C2_ID],u=i.filter(b=>e(g).has(b)),h=c.filter(b=>e(g).has(b)),C=u.length+h.length;if(C===0)return"<span class='ux-muted'>-</span>";let p=[];const m=(b,$,T)=>{var y;for(const E of b){if(p.length>=4)return;const k=(y=B[E])!=null?y:`AA:${E}`;p.push(`<span class='badge ${T}' title='${$}: ${k}'>${$}:${k}</span>`)}};return m(u,"C1","text-bg-primary"),m(h,"C2","text-bg-danger"),C>p.length&&p.push(`<span class='badge text-bg-secondary'>+${C-p.length}</span>`),`<span class='d-inline-flex flex-wrap gap-1'>${p.join("")}</span>`});let n=`https://locutus.s3.ap-southeast-2.amazonaws.com/conflicts/index.gzip?${me.version.conflicts}`;$e(n).then(t=>Ie(null,null,function*(){v(F,null),v(_,t),v(R,nt(me.version.conflicts,t.update_ms));let a=t.alliance_ids,s=t.alliance_names;for(let c=0;c<a.length;c++)B[a[c]]=fe(s[c],a[c]);v(Se,a.map((c,u)=>({id:c,label:fe(s[u],c)})));let o=zt();const i=o.get("ids");if(i)for(const c of i.split("."))e(g).add(parseInt(c));else for(let c=0;c<a.length;c++)e(g).add(a[c]);v(H,o.get("guild")||o.get("guild_id")),yield Kt(),ae(t,e(H)),v(Q,!0),pe(),J(!1)})).catch(t=>{console.error("Failed to load conflicts data",t),v(F,"Could not load conflicts data. Please try again later."),v(Q,!0)})}catch(n){console.error("Error reading from S3 bucket:",n),v(F,"Could not load conflicts data. Please try again later.")}});function ae(n,t){var T,y,E,k,V,K,ce,de,se,Pe,Re,Oe,ze,Fe,Be,We,je,Ue,Ge;let a=[...n.headers],s=[l.NAME,l.C1_NAME,l.C2_NAME,l.START,l.END,l.WARS,l.ACTIVE_WARS,l.C1_DEALT,l.C2_DEALT,l.CATEGORY],o=[l.NAME,l.CATEGORY,l.C1_NAME,l.C2_NAME],i={},c=[l.END+1,"desc"],u=n.conflicts;q={},e(g).size!=((T=e(_))==null?void 0:T.alliance_ids.length)&&(u=u.filter(A=>{const d=A[l.C1_ID],x=A[l.C2_ID];return d.some(I=>e(g).has(I))||x.some(I=>e(g).has(I))}));let h=a.indexOf("source"),C=n.source_sets,p=n.source_names,m=t&&C?C[t]:null;if(m){v(M,[p[t],parseFloat(t)]),e(M)[0]||qe(M,e(M)[0]=t+" (None Featured)");let A=function(d){if(!m)return!0;let x=h==-1?0:d[h];return!x||x==0||m.includes(x)||parseFloat(t)==x||d[0]==parseInt(t)?!0:x==128};u=u.filter(A)}v(O,{});for(const A of u){const d=`${(y=A[l.CATEGORY])!=null?y:"uncategorized"}`;qe(O,e(O)[d]=((E=e(O)[d])!=null?E:0)+1)}e(D).size===0?v(D,new Set(Object.keys(e(O)))):(v(D,new Set([...e(D)].filter(A=>e(O)[A]!=null))),e(D).size===0&&v(D,new Set(Object.keys(e(O))))),u=u.filter(A=>{var x;const d=`${(x=A[l.CATEGORY])!=null?x:"uncategorized"}`;return e(D).has(d)});for(let A=0;A<u.length;A++){let d=u[A],x=d[l.NAME];Te[x]=[d[l.C1_ID],d[l.C2_ID]],d[l.C1_NAME],d[l.C2_NAME];const I=d[l.ID],$t=d[l.C1_ID],yt=d[l.C2_ID],Tt=$t.filter(W=>e(g).has(W)),Et=yt.filter(W=>e(g).has(W)),He=Tt.map(W=>{var le;return(le=B[W])!=null?le:`AA:${W}`}).slice(0,4),Ve=Et.map(W=>{var le;return(le=B[W])!=null?le:`AA:${W}`}).slice(0,4),Ke=e(g).size!==((k=e(_))==null?void 0:k.alliance_ids.length),ue=[];Ke&&He.length>0&&ue.push(`C1: ${He.join(", ")}`),Ke&&Ve.length>0&&ue.push(`C2: ${Ve.join(", ")}`),q[I]={name:x,c1Name:(V=d[l.C1_NAME])!=null?V:"N/A",c2Name:(K=d[l.C2_NAME])!=null?K:"N/A",category:`${(ce=d[l.CATEGORY])!=null?ce:"uncategorized"}`,start:(de=d[l.START])!=null?de:0,end:(se=d[l.END])!=null?se:-1,wars:(Pe=d[l.WARS])!=null?Pe:0,activeWars:(Re=d[l.ACTIVE_WARS])!=null?Re:0,c1Dealt:(Oe=d[l.C1_DEALT])!=null?Oe:0,c2Dealt:(ze=d[l.C2_DEALT])!=null?ze:0,totalDealt:((Fe=d[l.C1_DEALT])!=null?Fe:0)+((Be=d[l.C2_DEALT])!=null?Be:0),pinnedInfo:ue.length>0?ue.join(" | "):null,wiki:(We=d[l.WIKI])!=null?We:null,status:(je=d[l.STATUS])!=null?je:null,cb:(Ue=d[l.CB])!=null?Ue:null,posts:d[l.POSTS]}}Ee=u,a.push("total");const f=e(g).size!==((Ge=e(_))==null?void 0:Ge.alliance_ids.length);f&&a.push("pinned"),u=u.map(A=>{const d=A[l.C1_DEALT]+A[l.C2_DEALT];return f?[...A,d,""]:[...A,d]});const b=f?a.length-1:-1;f&&s.push(b),i.formatUrl=[l.NAME],i.formatNumber=[l.WARS,l.ACTIVE_WARS],i.formatMoney=[l.C1_DEALT,l.C2_DEALT,l.TOTAL],i.formatDate=[l.START,l.END],f&&(i.formatPinnedAlliances=[b]);let $=document.getElementById("conflictTable");re={columns:a,data:u,visible:s,searchable:o,cell_format:i,row_format:(A,d,x)=>{let I=d[5];I==-1?A.classList.add("bg-danger-subtle"):I<Date.now()-432e6?A.classList.add("bg-light-subtle"):A.classList.add("bg-warning-subtle")},sort:c},Zt($,re)}function st(n){const a=n.target.value,s=e(_).source_names[a];v(M,[s,a]),v(H,a==="0"?null:a),tt("guild",a==="0"?null:a),pe(),ae(e(_),a),J(!0)}function lt(n){const t=n.trim();return t?/^https?:\/\//i.test(t)?t:`https://politicsandwar.fandom.com/wiki/${encodeURIComponent(t)}`:"#"}function ne(n){n&&(n.preventDefault(),n.stopPropagation())}function De(n){return n===-1?"Ongoing":!n||Number.isNaN(n)?"N/A":new Date(n).toLocaleString()}function ge(n){return!n||Number.isNaN(n)?"$0":`$${Math.round(n).toLocaleString()}`}function Ne(n,t){var s,o;const a=document.createElement("div");if(t==="status")a.innerHTML=`<ul class='m-0'><li>${(s=n.status)!=null?s:"N/A"}</li></ul>`;else if(t==="cb")a.innerHTML=`<ul class='m-0'><li>${(o=n.cb)!=null?o:"N/A"}</li></ul>`;else{const i=n.posts,c=document.createElement("ul");c.className="m-0";let u=!1;i&&typeof i=="object"&&Object.entries(i).forEach(([h,C])=>{var T;const p=C,m=document.createElement("li"),f=Array.isArray(p)?p[0]:null,b=Array.isArray(p)&&(T=p[1])!=null?T:h,$=Array.isArray(p)?p[2]:null;if(f!=null){const y=document.createElement("a");y.href=`https://forum.politicsandwar.com/index.php?/topic/${f}`,y.target="_blank",y.rel="noopener noreferrer",y.textContent=b,m.appendChild(y)}else m.textContent=b;if(typeof $=="number"){const y=document.createElement("small");y.className="text-muted ms-2",y.textContent=nt("",$).replace("Version:  • ","").replace("Version: ",""),m.appendChild(y)}c.appendChild(m),u=!0}),u?a.appendChild(c):a.innerHTML="<ul class='m-0'><li>No posts available</li></ul>"}return a.outerHTML}function ke(n,t){const a=L(n);return`<button type='button' class='btn ux-btn btn-sm fw-bold me-2' onclick='openConflictCard(undefined,${t})' aria-label='Back to conflict actions for ${a}' title='Back to actions'><i class='bi bi-arrow-left'></i></button>${a}`}function L(n){return n.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;")}function it(n){const t=new Set(e(D));if(t.has(n)){if(t.size===1)return;t.delete(n)}else t.add(n);v(D,t),ae(e(_),e(H)),J(!0)}function ot(){v(te,!0)}function rt(){v(te,!1)}function ct(n){const t=Jt(n.detail.ids);t.length!==0&&(v(g,new Set(t)),v(te,!1),dt())}function dt(){v(g,e(g)),tt("ids",Array.from(e(g)).join("."),{replace:!0}),pe(),ae(e(_),e(H)),J(!0)}function ut(){e(_)&&(v(g,new Set(e(_).alliance_ids)),v(H,null),v(M,["All",0]),v(D,new Set),v(te,!1),Ft(["ids","guild","guild_id"]),pe(),ae(e(_),null),J(!0))}function pt(){window.location.reload()}function J(n){const t=document.getElementById("visjs");if(e(Q)&&e(_)&&(t&&t.getAttribute("data-loaded")||typeof we()!="undefined")){const a=document.getElementById("visualization");if(!a)return;if(a.hasChildNodes()){if(!n)return;a.innerHTML=""}const s=we(),o=new s.DataSet;let i=Date.now(),c=0;const u=e(_).alliance_ids.length!=e(g).size;Ee.forEach(p=>{if(u&&!p[l.C1_ID].some(T=>e(g).has(T))&&!p[l.C2_ID].some(T=>e(g).has(T)))return;const m=p[l.NAME],f=p[l.START],b=p[l.END];i=Math.min(i,f),c=Math.max(c,b==-1?Date.now():b);const $=`${oe}/conflict?id=${p[l.ID]}`;o.add({id:p[l.ID],content:`<a href="${$}" target="_blank" title="${m}">${m}</a>`,start:f,end:b===-1?Date.now():b})});const h={start:i,end:c,height:"75vh",width:"100%",zoomKey:"ctrlKey",orientation:"top",verticalScroll:!0},C=new s.Timeline(a,o,h);C.addCustomTime(i,"t1"),C.addCustomTime(c,"t2")}}function mt(n){n.target.setAttribute("data-loaded","true"),J(!1)}kt(()=>(e(_),e(g),e(O),e(D),e(H)),()=>{v(Y,(()=>{if(!e(_))return!1;const n=e(g).size===e(_).alliance_ids.length,t=Object.keys(e(O)),a=e(D).size===t.length&&t.every(s=>e(D).has(s));return!n||!!e(H)||!a})())}),xt(),wt();var ve=ra();Rt("fz0r3g",n=>{var t=ea(),a=Ye(t);N(a),Lt(()=>{Pt.title="Conflicts"}),ie("load",a,mt),j(n,t)});var he=S(ve),Ce=S(he),ft=S(Ce);{let n=Qe(()=>[{label:"Home",href:`${oe}/`},{label:"Conflicts"}]);Wt(ft,{get items(){return e(n)}})}Ae(2),w(Ce);var bt=N(Ce,2);{var _t=n=>{var t=aa(),a=S(t),s=N(S(a),2),o=S(s);o.value=o.__value="0";var i=N(o);Ze(i,1,()=>(e(_),U(()=>Object.entries(e(_).source_names))),et,(c,u)=>{var h=Je(()=>Xe(e(u),2));let C=()=>e(h)[0],p=()=>e(h)[1];var m=ta(),f=S(m,!0);w(m);var b={};Z(()=>{var $;at(m,(C(),e(M),U(()=>C()==e(M)[1]))),X(f,p()),b!==(b=C())&&(m.value=($=m.__value=C())!=null?$:"")}),j(c,m)}),w(s),Ae(2),w(a),w(t),Z(()=>at(o,(e(M),U(()=>e(M)[1]==0)))),ie("change",s,st),j(n,t)};ee(bt,n=>{e(_),U(()=>e(_)&&e(_).source_names)&&n(_t)})}w(he);var xe=N(he,2);{var gt=n=>{Yt(n)};ee(xe,n=>{e(Q)||n(gt)})}var Me=N(xe,2);{var vt=n=>{var t=na(),a=S(t),s=S(a,!0);w(a);var o=N(a,2);w(t),Z(()=>X(s,e(F))),ie("click",o,pt),j(n,t)};ee(Me,n=>{e(F)&&n(vt)})}var Le=N(Me,2);{var ht=n=>{var t=ia(),a=Ye(t),s=S(a),o=N(S(s),4);Ze(o,1,()=>(e(O),U(()=>Object.entries(e(O)))),et,(f,b)=>{var $=Je(()=>Xe(e(b),2));let T=()=>e($)[0],y=()=>e($)[1];var E=sa();let k;var V=S(E),K=N(V),ce=S(K,!0);w(K),w(E),Z(de=>{var se;k=Bt(E,1,"btn btn-sm fw-bold",null,k,de),X(V,`${(se=T())!=null?se:""} `),X(ce,y())},[()=>({"ux-btn":e(D).has(T()),"btn-outline-secondary":!e(D).has(T())})]),ie("click",E,()=>it(T())),j(f,E)});var i=N(o,2);{var c=f=>{var b=la();Ae(4),j(f,b)};ee(i,f=>{e(g),e(_),U(()=>e(g).size!==e(_).alliance_ids.length)&&f(c)})}w(s),w(a);var u=N(a,2),h=S(u),C=S(h);w(h);var p=N(h,2);Qt(p,{onReset:ut,get resetDirty(){return e(Y)}}),w(u);var m=N(u,2);{let f=Qe(()=>(e(g),U(()=>Array.from(e(g)))));qt(m,{get open(){return e(te)},title:"Filter Alliances",description:"Select alliances to include in conflict filtering. This does not change individual conflict stats.",get items(){return e(Se)},get selectedIds(){return e(f)},searchPlaceholder:"Search alliances...",validateSelection:b=>b.length===0?"Select at least one alliance.":null,$$events:{close:rt,apply:ct}})}Z(()=>{var f,b;return X(C,`Filter Alliances (${(f=(e(g),U(()=>e(g).size)))!=null?f:""}/${(b=(e(_),U(()=>e(_).alliance_ids.length)))!=null?b:""})`)}),ie("click",h,ot),j(n,t)};ee(Le,n=>{e(_)&&n(ht)})}var Ct=N(Le,6);{var At=n=>{var t=oa(),a=S(t,!0);w(t),Z(()=>X(a,e(R))),j(n,t)};ee(Ct,n=>{e(R)&&n(At)})}w(ve),j(r,ve),Mt()}export{Aa as component};
