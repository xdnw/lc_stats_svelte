var Yt=Object.defineProperty,Vt=Object.defineProperties;var Wt=Object.getOwnPropertyDescriptors;var pt=Object.getOwnPropertySymbols;var Zt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable;var bt=(G,L,P)=>L in G?Yt(G,L,{enumerable:!0,configurable:!0,writable:!0,value:P}):G[L]=P,$e=(G,L)=>{for(var P in L||(L={}))Zt.call(L,P)&&bt(G,P,L[P]);if(pt)for(var P of pt(L))Xt.call(L,P)&&bt(G,P,L[P]);return G},Ie=(G,L)=>Vt(G,Wt(L));var he=(G,L,P)=>new Promise((Z,ve)=>{var _e=q=>{try{F(P.next(q))}catch(X){ve(X)}},j=q=>{try{F(P.throw(q))}catch(X){ve(X)}},F=q=>q.done?Z(q.value):Promise.resolve(q.value).then(_e,j);F((P=P.apply(G,L)).next())});import{a as re,f as ie,s as ce,e as Ee}from"../chunks/ByHfNYyH.js";import{i as Ht}from"../chunks/DPmMxCJa.js";import{o as Jt,a as ea}from"../chunks/TrlPcG3m.js";import{p as ta,l as Pe,a as aa,t as ue,b as ra,g as e,s as M,c as N,e as o,r as C,u as me,k as ht,m as T,h as ia,n as la,i as na,f as sa}from"../chunks/MAWq1Bs-.js";import{i as ye}from"../chunks/DRn8owhI.js";import{h as oa,a as ca,g as ua,b as de,s as fe,d as yt,r as ma}from"../chunks/D5oqsy_p.js";import{c as Ze,s as da,r as Xe}from"../chunks/CnrOJzGS.js";import{B as fa,a as va,f as pa,y as ba,c as _t,e as gt,h as ha,g as ya,i as _a,b as ga,P as xa,S as ka,j as He,k as wa,l as za,m as Na}from"../chunks/BrECN6iW.js";import{b as xt}from"../chunks/BTi-TpZb.js";import{n as Ca,S as Ma}from"../chunks/BPvfXU5l.js";import{P as $a,g as Ia,d as Ea,r as Pa,E as ja}from"../chunks/Cyw-96Kf.js";import{C as Sa}from"../chunks/DcxSc3jB.js";import{b as Je}from"../chunks/B8xhrJ_g.js";var Ta=ie('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.7.1/nouislider.css"/>'),Ba=ie('<a class="btn ux-btn fw-bold"> <i class="bi bi-box-arrow-up-right"></i></a>'),La=ie('<div class="alert alert-danger m-2 d-flex justify-content-between align-items-center"><span> </span> <button class="btn btn-sm btn-outline-danger fw-bold">Retry</button></div>'),Ra=ie('<div class="empty" slot="empty"> </div>'),Da=ie(`<div class="d-flex justify-content-between align-items-center"><span class="fw-bold">Select 3 <button type="button" class="btn btn-link btn-sm p-0 ms-1 align-baseline" title="Metrics with ':' are cumulative sums over time. Metrics without ':' are point-in-time values for each frame." aria-label="Metric behavior help"><i class="bi bi-info-circle"></i></button></span> <!></div> <div class="d-flex justify-content-end mb-2"><!></div> <div class="select-compact mb-2" style="position: relative; z-index: 3;"><!></div> <div class="small text-muted mb-2"> </div> <span class="fw-bold">Per Unit or Nation:</span> <div class="form-check form-check-inline" style="position: relative; z-index: 2;"><label class="form-check-label" for="inlineCheckbox1">X</label> <input class="form-check-input" type="checkbox" id="inlineCheckbox1"/></div> <div class="form-check form-check-inline" style="position: relative; z-index: 2;"><label class="form-check-label" for="inlineCheckbox2">Y</label> <input class="form-check-input" type="checkbox" id="inlineCheckbox2"/></div> <div class="form-check form-check-inline" style="position: relative; z-index: 2;"><label class="form-check-label" for="inlineCheckbox3">Z</label> <input class="form-check-input" type="checkbox" id="inlineCheckbox3"/></div>`,1),Fa=ie('<div class="small text-muted text-end mt-2"> </div>'),Oa=ie('<div class="container-fluid p-2 ux-page-body"><h1 class="m-0 mb-2 p-2 ux-surface ux-page-title"><div class="ux-page-title-stack"><!> <span class="ux-page-title-main"> </span></div> <!></h1> <!> <div class="row m-0 p-0 ux-surface ux-tab-panel" style="min-height: 116px; position: relative; z-index: 80; overflow: visible;"><!> <!> <div class="col-12"><div style="width: calc(100% - 30px);margin-left:15px;"><div class="mt-3 mb-5" style="position: relative; z-index: 1;"></div></div> <!></div></div> <div class="row m-0 p-0 mt-2 ux-surface" style="overflow-x: hidden; position: relative; z-index: 1;"><div class="col-12 m-0 p-0"><div class="m-0 p-0"></div></div></div> <!></div>');function tr(G,L){ta(L,!1);const P=T(),Z=T(),ve=T();function _e(){return _a()}let j=T(),F=T(null),q=T(),X=T(!1),le=T(null),je=T(""),Q=T(!1),Y=T(!1),V=T(!1),ge=0,xe=T(),b=T([0,70]),U=T(0),ke=null,ne=null,se=null,Se=new Map,Te=!1,ae=null,kt=0,Be=0,Le=null,Re=null,et=T("frame");const wt=[{key:"frame",label:"Current time frame points"},{key:"timeline",label:"Full timeline points"},{key:"settings",label:"Current filter settings"}],tt=["coalition","alliance","alliance_id","time","time_label","x","y","size"],De=["dealt:loss_value","loss:loss_value","off:wars"];let g=T(De.map(t=>({value:t,label:t}))),we=[];function Fe(){var t;return(t=e(xe))==null?void 0:t.noUiSlider}function zt(){var t;e(g).length!=3||za(we,e(g))||(o(Z,((t=e(g))==null?void 0:t.length)===3),we=e(g).slice(),de("selected",e(g).map(a=>a.value).join(".")),fe(),ze())}function Oe(){return he(this,null,function*(){yield sa();let t=(e(Q)?1:0)+(e(Y)?2:0)+(e(V)?4:0);return ge==t?!1:(ge=t|0,de("normalize",t==0?null:t,{replace:!0}),fe(),ze(),!0)})}function Nt(){o(b,[0,70]),o(U,0),o(Q,!1),o(Y,!1),o(V,!1),ge=0,o(g,["dealt:loss_value","loss:loss_value","off:wars"].map(a=>({value:a,label:a}))),we=e(g).slice(),ma(["city_min","city_max","time","normalize","selected"],["id"]),de("selected",e(g).map(a=>a.value).join("."),{replace:!0}),fe();const t=Fe();t&&t.set([e(b)[0],e(b)[1]]),e(j)&&ze()}function Ct(t){var d;let a=t.get("time");a&&!isNaN(+a)&&Number.isInteger(+a)&&o(U,+a);let l=t.get("city_min"),n=t.get("city_max");l&&!isNaN(+l)&&Number.isInteger(+l)&&ht(b,e(b)[0]=+l),n&&!isNaN(+n)&&Number.isInteger(+n)&&ht(b,e(b)[1]=+n);let i=t.get("selected");i&&o(g,i.split(".").map(h=>({value:h,label:h}))),we=e(g).slice(),o(Z,((d=e(g))==null?void 0:d.length)===3);let c=t.get("normalize");if(c&&!isNaN(+c)&&Number.isInteger(+c)){let h=+c;o(Q,(h&1)!=0),o(Y,(h&2)!=0),o(V,(h&4)!=0),ge=h}}let W=T();Jt(()=>he(null,null,function*(){var l;try{ae=new Worker(new URL(""+new URL("../workers/bubbleTraceWorker-zfY8NANJ.js",import.meta.url).href,import.meta.url),{type:"module"})}catch(n){ae=null,console.warn("Bubble worker unavailable, using main-thread fallback",n)}ca(["city_min","city_max","time","normalize","selected"],["id"]);let t=ua();Ct(t);const a=t.get("id");a?(o(F,a),at(e(F))):o(le,"Missing conflict id in URL"),Ca.create(e(xe),{start:e(b),connect:!0,step:1,tooltips:[{to:n=>`City ${Math.round(n)}`},{to:n=>`City ${Math.round(n)}`}],range:{min:0,max:70},pips:{mode:"steps",density:5,filter:(n,i)=>n%5?0:2}}),ke=n=>{o(b,n.map(i=>parseInt(i))),de("city_min",e(b)[0]==0?null:e(b)[0],{replace:!0}),de("city_max",e(b)[1]==70?null:e(b)[1],{replace:!0}),fe(),ze()},(l=Fe())==null||l.on("set",ke)})),ea(()=>{var a,l,n;Be++,ae&&(ae.terminate(),ae=null);const t=Fe();if(t&&(ke&&t.off("set",ke),t.destroy()),e(W)){const i=e(W);ne&&((a=i.removeListener)==null||a.call(i,"plotly_animated",ne)),se&&((l=i.removeListener)==null||l.call(i,"plotly_sliderchange",se)),(n=_e())==null||n.purge(e(W))}});function at(t){let a=va(t,Ze.version.graph_data);yt(a).then(l=>he(null,null,function*(){o(q,l.name),o(j,l),Se.clear(),o(je,pa(Ze.version.graph_data,l.update_ms)),o(le,null),yield ba(),it(e(j)),o(X,!0),fe(),(typeof window.requestIdleCallback=="function"?i=>window.requestIdleCallback(i,{timeout:2500}):i=>window.setTimeout(i,300))(()=>{const i=ya(t,Ze.version.conflict_data);yt(i).catch(()=>{})})})).catch(l=>{console.error("Failed to load bubble graph data",l),o(le,"Could not load conflict graph data. Please try again later."),o(X,!0)})}function Mt(){e(F)&&(o(X,!1),o(le,null),at(e(F)))}function $t(t,a,l,n){return ae?new Promise((i,c)=>{const d=ae;if(!d){i(Ue(t,a[0],a[1],a[2],l,n));return}const h=++kt,_=I=>{const p=I.data;!p||p.id!==h||(d.removeEventListener("message",_),d.removeEventListener("error",w),p.ok?i(p.result):c(new Error(p.error)))},w=I=>{var p;d.removeEventListener("message",_),d.removeEventListener("error",w),c((p=I.error)!=null?p:new Error(I.message))};d.addEventListener("message",_),d.addEventListener("error",w,{once:!0});const $={id:h,data:t,metrics:a,minCity:l,maxCity:n};d.postMessage($)}).catch(i=>(console.warn("Bubble worker compute failed, falling back to main thread",i),Ue(t,a[0],a[1],a[2],l,n))):Promise.resolve(Ue(t,a[0],a[1],a[2],l,n))}function It(t,a,l){var i;const n=t.map(c=>`${c.name}:${c.normalize?1:0}:${c.cumulative?1:0}`).join("|");return`${(i=e(F))!=null?i:"-"}|${n}|${a}-${l}`}function ze(){Te||(Te=!0,requestAnimationFrame(()=>{Te=!1,it(e(j))}))}function rt(t){let a=t.name;return t.cumulative&&(a+=" (sum)"),t.normalize&&(a+=" (avg)"),a}function Ue(t,a,l,n,i,c){let d={x:[0,Number.MIN_SAFE_INTEGER],y:[0,Number.MIN_SAFE_INTEGER],z:[0,Number.MIN_SAFE_INTEGER]},h=Object.keys(d),_=[a,l,n];const w=Pa(t,_);if(!w)return null;let $=w.metric_indexes,I=w.metric_is_turn,p=w.metric_normalize,R=w.isAnyTurn,A={};for(let r=0;r<t.coalitions.length;r++){let s=t.coalitions[r],f=s.cities.findIndex(v=>v>=i),m=s.cities.slice().reverse().findIndex(v=>v<=c);m!==-1&&(m=s.cities.length-1-m),f==-1&&(f=0),m==-1&&(m=s.cities.length);let k=s.turn.range[0],E=s.day.range[0],O=R?k:E,K=R?s.turn.range[1]:s.day.range[1];for(let v=0;v<s.alliance_ids.length;v++){let S=s.alliance_ids[v],oe=ga(s.alliance_names[v],S),y=[0,0,0],pe=-1;for(let B=O;B<=K;B++){let be=A[B];be||(be={},A[B]=be);let H=be[r];H||(H={x:[],y:[],id:[],text:[],customdata:[],marker:{size:[]}},be[r]=H),H.id.push(S),H.text.push(oe);let qt=R?B:Math.floor(B*12),Ne=R?Math.floor(B/12):B;for(let D=0;D<_.length;D++){let J=I[D];if(!J&&pe==Ne)continue;let Kt=_[D].cumulative,dt=$[D],ft=J?s.turn.data[dt][v]:s.day.data[dt][v];if(!ft)continue;let Ve=ft[J?qt-k:Ne-E];if(!Ve||Object.keys(Ve).length==0)continue;let Ce=0;for(let ee=f;ee<=m;ee++)Ce+=Ve[ee];let We=p[D];if(We!=-1){let ee=0,vt=s.day.data[0][v];if(!vt)continue;let Me=vt[Ne-E];if(!Me||Me.length==0)continue;if(We==0)for(let te=f;te<=m;te++)ee+=Me[te];else for(let te=f;te<=m;te++){let Qt=s.cities[te];ee+=Me[te]*Qt*We}ee!=0&&(Ce/=ee)}Kt?y[D]+=Ce:y[D]=Ce}H.x.push(y[0]),H.y.push(y[1]),H.customdata.push(y[2]);for(let D=0;D<3;D++){let J=h[D];y[D]<d[J][0]&&(d[J][0]=y[D]),y[D]>d[J][1]&&(d[J][1]=y[D])}pe=Ne}}}let z=Math.min(...Object.keys(A).map(Number)),x=Math.max(...Object.keys(A).map(Number));return{traces:A,times:{start:z,end:x,is_turn:R},ranges:d}}function it(t){return he(this,null,function*(){if(!t)return;const a=++Be;let l=e(g).map($=>$.value);if(l.length!=3)return;let n={name:l[0],cumulative:l[0].includes(":"),normalize:e(Q)},i={name:l[1],cumulative:l[1].includes(":"),normalize:e(Y)},c={name:l[2],cumulative:l[2].includes(":"),normalize:e(V)};const d=[n,i,c],h=It(d,e(b)[0],e(b)[1]);let _=Se.get(h);if(!_){const $=yield $t(t,d,e(b)[0],e(b)[1]);if(a!==Be||!$)return;_=$,Se.set(h,_)}if(!_)return;Le=_,Re=d;let w=t.coalitions.map($=>$.name);Et(_.traces,_.times,_.ranges,w,d)})}function Et(t,a,l,n,i){var c=Object.keys(t).map(Number);if(c.length===0)return;o(U,Math.min(Math.max(e(U),0),Math.max(c.length-1,0)));var d=t[a.start+e(U)];if(!d)return;var h=Object.keys(d).map(Number);for(let u=a.start;u<=a.end;u++){let r=t[u];if(!r)continue;let s=0;for(let f=0;f<n.length;f++){let m=r[f];m&&(s=Math.max(s,Math.max(...m.customdata)))}for(let f=0;f<n.length;f++){let m=r[f];m&&(m.marker={size:m.customdata.map(k=>s>0?k/s:1)})}}function _(u,r){let s=t[u];s||(s=t[u]={});let f=s[r];return f||(f=s[r]={x:[],y:[],customdata:[],id:[],text:[],marker:{size:[]}}),f}let w={};var $=[];for(let u=0;u<c.length;u++){let r=[];for(let s=0;s<h.length;s++){let f=h[s],m=w[f];m||(m=w[f]={x:{},y:{},z:{}});let k=_(c[u],f);for(let E=0;E<k.id.length;E++){let O=k.id[E],K=m.x[O],v=m.y[O],S=m.z[O];K||(K=m.x[O]=[],v=m.y[O]=[],S=m.z[O]=[]),K.push(k.x[E]),v.push(k.y[E]),S.push(k.customdata[E]),r.push({x:K.slice(),y:v.slice(),customdata:S.slice(),mode:"lines"})}r.push(k)}$.push({name:c[u],data:r})}var I=[];for(let u=0;u<h.length;u++){let r=h[u];var p=d[r];let s=Object.keys($a).map(Number).indexOf(r),f=Ia(Ea,p.id.length,s),m=w[r];m||(m=w[r]={x:{},y:{},z:{}});for(let k=0;k<p.id.length;k++){let E=p.id[k],O=m.x[E],K=m.y[E],v=m.z[E];O||(O=[],K=[],v=[]),I.push({x:O.slice(0,e(U)+1),y:K.slice(0,e(U)+1),customdata:v.slice(0,e(U)+1),mode:"lines",line:{width:.3,color:f[k]},hoverinfo:"all",showlegend:!1,hovertemplate:`${p.text[k]}<br>${i[0].name}: %{x}<br>${i[1].name}: %{y}<br>${i[2].name}: %{customdata}<extra></extra>`})}I.push({name:n[u],x:p.x.slice(),y:p.y.slice(),customdata:p.customdata.slice(),id:p.id.slice(),text:p.text.slice(),mode:"markers+text",textposition:"middle center",textfont:{size:7,color:"rgba(0, 0, 0, 0.75)"},marker:{size:p.marker.size,sizemode:"area",sizeref:.001,sizemin:1,color:f},hovertemplate:`%{text}<br>${i[0].name}: %{x}<br>${i[1].name}: %{y}<br>${i[2].name}: %{customdata}<extra></extra>`})}let R=a.is_turn?_t:gt;var A=[];for(let u=0;u<c.length;u++)A.push({method:"animate",label:R(c[u]),args:[[c[u]],{mode:"immediate",transition:{duration:200},frame:{duration:200,redraw:!0}}]});var z={height:window.innerHeight*.8,margin:{l:0,r:0,t:30,b:60},xaxis:{title:rt(i[0])},yaxis:{title:rt(i[1])},hovermode:"closest",legend:{x:.5,y:1.1,itemsizing:"constant",xanchor:"center",yanchor:"top"},updatemenus:[{x:0,y:0,yanchor:"top",xanchor:"left",showactive:!1,direction:"left",type:"buttons",pad:{t:87,r:10},buttons:[{method:"animate",args:[null,{mode:"immediate",fromcurrent:!0,transition:{duration:200},frame:{duration:200,redraw:!0}}],label:"Play"},{method:"animate",args:[[null],{mode:"immediate",transition:{duration:0},frame:{duration:0,redraw:!0}}],label:"Pause"}]}],sliders:[{active:e(U),pad:{l:130,t:55},currentvalue:{visible:!0,prefix:"",xanchor:"right",font:{size:20,color:"#666"}},steps:A}]};if(document.documentElement.getAttribute("data-bs-theme")==="dark"){let u=getComputedStyle(document.documentElement).getPropertyValue("--bs-body-bg"),r=getComputedStyle(document.documentElement).getPropertyValue("--bs-body-color");z.plot_bgcolor=u,z.paper_bgcolor=u,z.font={color:r},z.xaxis=Ie($e({},z.xaxis),{gridcolor:r,zerolinecolor:r,tickfont:{color:r},titlefont:{color:r}}),z.yaxis=Ie($e({},z.yaxis),{gridcolor:r,zerolinecolor:r,tickfont:{color:r},titlefont:{color:r}}),z.legend=Ie($e({},z.legend),{font:{color:r}})}ha(["plotjs"]).then(()=>{var s,f,m,k;const u=_e();if(!u)return;const r=e(W);u.purge(e(W)),u.react(e(W),{data:I,layout:z,frames:$}),ne&&((s=r.removeListener)==null||s.call(r,"plotly_animated",ne)),se&&((f=r.removeListener)==null||f.call(r,"plotly_sliderchange",se)),ne=function(){u.relayout(e(W),{"xaxis.autorange":!0,"yaxis.autorange":!0})},se=function(E){o(U,E.slider.active),de("time",e(U),{replace:!0}),fe()},(m=r.on)==null||m.call(r,"plotly_animated",ne),(k=r.on)==null||k.call(r,"plotly_sliderchange",se)})}function Pt(){var I,p,R,A,z,x,u,r,s,f,m,k,E,O,K;if(!e(j)||!Le||!Re)return null;const{traces:t,times:a}=Le,l=e(j).coalitions.map(v=>v.name),n=Object.keys(t).map(Number).sort((v,S)=>v-S);if(n.length===0)return null;const i=Math.max(0,Math.min(e(U),Math.max(n.length-1,0))),c=a.start+i,d=(I=t[c])!=null?I:{},h=a.is_turn?_t:gt,_=[];for(const[v,S]of Object.entries(d)){const oe=Number(v);for(let y=0;y<S.id.length;y++)_.push([(p=l[oe])!=null?p:`Coalition ${oe+1}`,(R=S.text[y])!=null?R:`AA:${S.id[y]}`,S.id[y],c,h(c),(A=S.x[y])!=null?A:0,(z=S.y[y])!=null?z:0,(x=S.customdata[y])!=null?x:0])}const w=[];for(const v of n){const S=(u=t[v])!=null?u:{};for(const[oe,y]of Object.entries(S)){const pe=Number(oe);for(let B=0;B<y.id.length;B++)w.push([(r=l[pe])!=null?r:`Coalition ${pe+1}`,(s=y.text[B])!=null?s:`AA:${y.id[B]}`,y.id[B],v,h(v),(f=y.x[B])!=null?f:0,(m=y.y[B])!=null?m:0,(k=y.customdata[B])!=null?k:0])}}const $=Na([["conflict_id",(E=e(F))!=null?E:""],["conflict_name",(O=e(q))!=null?O:""],["selected_metrics",e(g).map(v=>v.value)],["city_min",e(b)[0]],["city_max",e(b)[1]],["normalize_x",e(Q)?1:0],["normalize_y",e(Y)?1:0],["normalize_z",e(V)?1:0],["time_index",i],["time_value",c],["time_label",h(c)]]);return{baseFileName:`bubble-${(K=e(F))!=null?K:"conflict"}`,meta:{conflictId:e(F),conflictName:e(q),selectedMetrics:Re,cityRange:e(b),normalize:{x:e(Q),y:e(Y),z:e(V)},activeTime:c,activeTimeLabel:h(c),isTurn:a.is_turn},tables:[{key:"frame",label:"Current time frame points",columns:tt,rows:_},{key:"timeline",label:"Full timeline points",columns:tt,rows:w},{key:"settings",label:"Current filter settings",columns:["key","value"],rows:$}]}}function jt(t){const a=Pt();a&&wa({bundle:a,datasetKey:t.datasetKey,format:t.format,target:t.target})}Pe(()=>e(g),()=>{Array.isArray(e(g))||o(g,[])}),Pe(()=>(e(g),e(Q),e(Y),e(V),e(U),e(b)),()=>{o(P,(()=>{const t=e(g).map(n=>n.value),a=t.length===De.length&&t.every((n,i)=>n===De[i]),l=(e(Q)?1:0)+(e(Y)?2:0)+(e(V)?4:0);return e(U)!==0||e(b)[0]!==0||e(b)[1]!==70||l!==0||!a})())}),Pe(()=>e(g),()=>{var t;o(Z,((t=e(g))==null?void 0:t.length)===3)}),Pe(()=>(e(Z),e(j)),()=>{var t;o(ve,e(Z)||!e(j)?[]:[...((t=e(j).metric_names)!=null?t:[]).map(a=>({value:a,label:a}))])}),aa(),Ht();var Ae=Oa();oa("17fhl7v",t=>{var a=Ta();re(t,a)});var Ge=N(Ae),qe=N(Ge),lt=N(qe);{let t=ia(()=>[{label:"Home",href:`${Je}/`},{label:"Conflicts",href:`${Je}/conflicts`},{label:e(q)||"Conflict",href:e(F)?`${Je}/conflict?id=`+e(F):void 0},{label:"Bubble"}]);fa(lt,{get items(){return e(t)}})}var nt=M(lt,2),St=N(nt);C(nt),C(qe);var Tt=M(qe,2);{var Bt=t=>{var a=Ba(),l=N(a);la(),C(a),ue(()=>{var n,i;da(a,"href",`https://politicsandwar.fandom.com/wiki/${(n=(e(j),me(()=>e(j).wiki)))!=null?n:""}`),ce(l,`Wiki:${(i=(e(j),me(()=>{var c;return(c=e(j))==null?void 0:c.wiki})))!=null?i:""} `)}),re(t,a)};ye(Tt,t=>{e(j),me(()=>{var a;return(a=e(j))==null?void 0:a.wiki})&&t(Bt)})}C(Ge);var st=M(Ge,2);Sa(st,{get conflictId(){return e(F)},active:"bubble"});var Ke=M(st,2),ot=N(Ke);{var Lt=t=>{xa(t)};ye(ot,t=>{e(X)||t(Lt)})}var ct=M(ot,2);{var Rt=t=>{var a=La(),l=N(a),n=N(l,!0);C(l);var i=M(l,2);C(a),ue(()=>ce(n,e(le))),Ee("click",i,Mt),re(t,a)};ye(ct,t=>{e(le)&&t(Rt)})}var ut=M(ct,2),Qe=N(ut),Dt=N(Qe);xt(Dt,t=>o(xe,t),()=>e(xe)),C(Qe);var Ft=M(Qe,2);{var Ot=t=>{var a=Da(),l=na(a),n=M(N(l),2);ka(n,{onReset:Nt,get resetDirty(){return e(P)}}),C(l);var i=M(l,2),c=N(i);ja(c,{get datasets(){return wt},onExport:jt,get selectedDatasetKey(){return e(et)},set selectedDatasetKey(x){o(et,x)},$$legacy:!0}),C(i);var d=M(i,2),h=N(d);Ma(h,{multiple:!0,get items(){return e(ve)},showChevron:!0,get value(){return e(g)},set value(x){o(g,x)},$$events:{change:zt},$$slots:{empty:(x,u)=>{var r=Ra(),s=N(r,!0);C(r),ue(()=>ce(s,e(Z)?"Max 3 items":"No options")),re(x,r)}},$$legacy:!0}),C(d);var _=M(d,2),w=N(_);C(_);var $=M(_,4),I=M(N($),2);Xe(I),I.value=I.__value="option1",C($);var p=M($,2),R=M(N(p),2);Xe(R),R.value=R.__value="option2",C(p);var A=M(p,2),z=M(N(A),2);Xe(z),z.value=z.__value="option3",C(A),ue(x=>{var u,r;return ce(w,`Metrics: ${x!=null?x:""} • Cities ${(u=(e(b),me(()=>e(b)[0])))!=null?u:""}-${(r=(e(b),me(()=>e(b)[1])))!=null?r:""}`)},[()=>(e(g),me(()=>e(g).map(x=>x.label).join(" / ")))]),He(I,()=>e(Q),x=>o(Q,x)),Ee("change",I,Oe),He(R,()=>e(Y),x=>o(Y,x)),Ee("change",R,Oe),He(z,()=>e(V),x=>o(V,x)),Ee("change",z,Oe),re(t,a)};ye(Ft,t=>{e(j)&&t(Ot)})}C(ut),C(Ke);var Ye=M(Ke,2),mt=N(Ye),Ut=N(mt);xt(Ut,t=>o(W,t),()=>e(W)),C(mt),C(Ye);var At=M(Ye,2);{var Gt=t=>{var a=Fa(),l=N(a,!0);C(a),ue(()=>ce(l,e(je))),re(t,a)};ye(At,t=>{e(je)&&t(Gt)})}C(Ae),ue(()=>{var t;return ce(St,`Conflict: ${(t=e(q))!=null?t:""}`)}),re(G,Ae),ra()}export{tr as component};
