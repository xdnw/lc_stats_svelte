var Zt=(r,Dt,X)=>new Promise((vt,d)=>{var M=B=>{try{G(X.next(B))}catch(H){d(H)}},lt=B=>{try{G(X.throw(B))}catch(H){d(H)}},G=B=>B.done?vt(B.value):Promise.resolve(B.value).then(M,lt);G((X=X.apply(r,Dt)).next())});import{a as F,e as at,f as j,w as we,s as dt,c as De}from"../chunks/DLCQTpuP.js";import{i as Se}from"../chunks/DT10vATe.js";import{o as Ne}from"../chunks/Di_BE8QR.js";import{p as xe,l as ke,a as Le,b as Me,g as t,i as yt,s as w,o as Pe,m as z,h as Re,c as D,e as C,k as te,$ as Oe,n as Lt,r as S,u as K,t as st,E as Mt,F as ee,j as ae}from"../chunks/DVbRBn6a.js";import{i as J}from"../chunks/Bxs4rezJ.js";import{h as Fe,a as ze,d as Pt,g as Be,s as Tt,e as Rt,i as Ot,b as se,r as We}from"../chunks/BLlCKcKh.js";import{c as Et,e as ne,a as Ft,r as je}from"../chunks/DnCfu7FQ.js";import{b as Ue}from"../chunks/BsffpG_N.js";import{b as _t}from"../chunks/DjEpIcmV.js";import{B as Ge,s as U,b as nt,l as zt,d as He,E as Ve,m as wt,g as Ke,a as Qe,o as Ye,f as le,y as Ie,p as qe,P as Je,S as Xe}from"../chunks/DqDmrPFw.js";import{a as Ze,s as ta}from"../chunks/BI-WfodV.js";var l=(r=>(r[r.ID=0]="ID",r[r.NAME=1]="NAME",r[r.C1_NAME=2]="C1_NAME",r[r.C2_NAME=3]="C2_NAME",r[r.START=4]="START",r[r.END=5]="END",r[r.C1_ID=6]="C1_ID",r[r.C2_ID=7]="C2_ID",r[r.WIKI=8]="WIKI",r[r.STATUS=9]="STATUS",r[r.CB=10]="CB",r[r.POSTS=11]="POSTS",r[r.SOURCE=12]="SOURCE",r[r.CATEGORY=13]="CATEGORY",r[r.WARS=14]="WARS",r[r.ACTIVE_WARS=15]="ACTIVE_WARS",r[r.C1_DEALT=16]="C1_DEALT",r[r.C2_DEALT=17]="C2_DEALT",r[r.TOTAL=18]="TOTAL",r))(l||{}),ea=we(j('<script id="visjs" async="" src="https://cdnjs.cloudflare.com/ajax/libs/vis-timeline/7.7.3/vis-timeline-graph2d.min.js"><\/script><!>',1)),aa=j("<option> </option>"),sa=j('<div class="d-inline-block ms-auto"><div class="input-group ux-inputbar"><label for="source" class="fw-bold input-group-text">Source:</label> <select class="form-select form-select-sm fw-bold"><option>All</option><!></select> <a class="btn ux-btn fw-bold" href="http://locutus.link/#/command/conflict%20create_temp" target="_blank" rel="noopener noreferrer">Create Conflict</a></div></div>'),na=j('<div class="alert alert-danger m-2 d-flex justify-content-between align-items-center"><span> </span> <button class="btn btn-sm btn-outline-danger fw-bold">Retry</button></div>'),la=j('<button title="Toggle category"> <span class="badge text-bg-light ms-1"> </span></button>'),ia=j('<span class="ux-muted ms-2">Pinned alliance badges:</span> <span class="badge text-bg-primary">C1</span> <span class="badge text-bg-danger">C2</span>',1),oa=j("<button> </button>"),ra=j(`<input type="text" class="form-control mb-2" placeholder="Search alliances..."/> <div class="d-flex justify-content-left align-items-center ms-1"><div class="ux-callout mb-2">These will toggle the visiblity of conflicts which contain the
          selected alliances. It does NOT affect the individual conflict stats.</div></div> <div class="ux-surface p-2 mb-2"><button class="btn ux-btn btn-sm ms-1 mb-1">Toggle All</button> <br/> <!></div>`,1),ca=j('<div class="ux-surface p-2 mb-2"><div class="d-flex flex-wrap gap-2 align-items-center"><span class="fw-bold">Quick filters:</span> <span class="ux-muted">Category</span> <!> <!></div></div> <div class="d-flex flex-wrap gap-1 mb-2 align-items-center"><button class="btn ux-btn">Filter Alliances&nbsp;<i></i></button> <!></div> <!>',1),da=j('<div class="small text-muted text-end mt-2"> </div>'),ua=j('<div class="container-fluid p-2 ux-page-body"><h1 class="m-0 mb-2 p-2 ux-surface ux-page-title"><div class="ux-page-title-stack"><!> <span class="ux-page-title-main">Conflicts</span></div> <!></h1> <!> <!> <!> <div id="conflictTable" class="inline-block"></div> <div class="ux-surface p-2 mt-2"><h4 class="m-1">Timeline</h4> <p class="ps-1 ux-muted">Use ctrl+mousewheel to zoom on PC</p> <div class="m-0" id="visualization"></div></div> <!></div>');function Ta(r,Dt){xe(Dt,!1);const X=z();let vt,d=z(null),M=z(["All",0]),lt=z(!1),G=z(null),B=z(""),H={},Bt={},it={},Wt=[],Q=z(null),b=z(new Set),ut=z(!1),Z=z(""),W=z({}),x=z(new Set);const jt=()=>qe();Ne(()=>{try{ze(["ids","guild","guild_id"]),Ze(),U("getIds",(e,a)=>{const n=Bt[e][a],o=n.map(i=>nt(H[i],i));return{alliance_ids:n,alliance_names:o}}),U("formatUrl",(e,a,n,o)=>{const i=n[l.ID],u=P(`${e}`);return`<span class='ux-conflict-cell'><a href='${`${_t}/conflict?id=${i}`}' class='btn ux-btn btn-sm fw-bold ux-conflict-name-btn' onclick='return openConflictCardFromName(event,${i})' aria-label='Open conflict details for ${u}' title='Left click: open card • Middle click/right click: open conflict page'>${u}</a></span>`}),U("openConflictCardFromName",(e,a)=>{if(!e){const i=zt("openConflictCard");return i==null||i(void 0,a),!1}if(e.stopPropagation(),!(e.button===0&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey))return!0;e.preventDefault();const o=zt("openConflictCard");return o==null||o(void 0,a),!1}),U("download",function(a,n){He(document.getElementById("conflictTable").querySelector("table"),a,Ve[n])}),U("openConflictField",(e,a,n)=>{mt(e);const o=it[a];if(!o)return;const i=`${o.name} - ${n.toUpperCase()}`;wt(i,Gt(o,n))}),U("openConflictFieldFromCard",(e,a,n)=>{mt(e);const o=it[a];if(!o)return;const i=`${o.name} - ${n.toUpperCase()}`;wt(Ht(i,a),Gt(o,n))}),U("openCoalitionForConflict",(e,a,n,o=!1)=>{mt(e);const i=it[a];if(!i)return;const u=zt("getIds");if(!u)return;const f=u(i.name,n),A=f.alliance_ids,$=document.createElement("ul");$.className="mb-0";for(let _=0;_<A.length;_++){const y=A[_],v=nt(f.alliance_names[_],y),E=document.createElement("a");E.setAttribute("href",`https://politicsandwar.com/alliance/id=${y}`),E.setAttribute("target","_blank"),E.setAttribute("rel","noopener noreferrer"),E.textContent=v;const N=document.createElement("li");N.appendChild(E),$.appendChild(N)}const p=document.createElement("div"),m=A.join(","),g=document.createElement("kbd");g.textContent=m,g.setAttribute("readonly","true"),g.setAttribute("class","form-control m-0"),p.appendChild(g);const h=`<button class='btn btn-outline-info btn-sm position-absolute top-0 end-0 m-3' onclick='copyToClipboard("${m}")' aria-label='Copy alliance ids'><i class='bi bi-clipboard'></i></button>`;p.innerHTML+=h,p.appendChild($),wt(o?Ht(`Coalition ${n+1}: ${i.name}`,a):`Coalition ${n+1}: ${i.name}`,p.outerHTML)}),U("openConflictCard",(e,a)=>{var v,E,N,L,R;mt(e);const n=it[a];if(!n)return;const o=(v=n.wiki)!=null?v:"",i=o.trim().length>0,u=((E=n.status)!=null?E:"").trim().length>0,f=((N=n.cb)!=null?N:"").trim().length>0,A=n.posts&&typeof n.posts=="object",$=i?oe(o):"#",p=`${_t}/conflict?id=${a}`,m=P(n.name),g=((L=n.pinnedInfo)!=null?L:"").trim().length>0,h=`
          <a class='btn ux-btn-primary w-100 fw-bold mb-2' href='${p}' onclick='openConflictPageFromCard(event,${a})' aria-label='Open full conflict page for ${m}'>Open Conflict Page</a>

          <div class='ux-conflict-popup-actions' role='group' aria-label='Conflict actions'>
            <button type='button' class='btn ux-btn fw-bold' onclick='openCoalitionForConflict(event,${a},0,true)' aria-label='Show coalition 1 alliances for ${m}'>C1</button>
            <button type='button' class='btn ux-btn fw-bold' onclick='openCoalitionForConflict(event,${a},1,true)' aria-label='Show coalition 2 alliances for ${m}'>C2</button>
            <button type='button' class='btn ux-btn fw-bold' onclick='openConflictFieldFromCard(event,${a},"status")' ${u?"":"disabled"} aria-label='Open status for ${m}'>Status</button>
            <button type='button' class='btn ux-btn fw-bold' onclick='openConflictFieldFromCard(event,${a},"cb")' ${f?"":"disabled"} aria-label='Open casus belli for ${m}'>CB</button>
            <button type='button' class='btn ux-btn fw-bold' onclick='openConflictFieldFromCard(event,${a},"posts")' ${A?"":"disabled"} aria-label='Open posts for ${m}'>Posts</button>
            <a class='btn ux-btn fw-bold' href='${$}' ${i?"target='_blank' rel='noopener noreferrer'":"aria-disabled='true' tabindex='-1'"} aria-label='Open wiki for ${m} in a new tab'>Wiki</a>
          </div>

          <div class='ux-conflict-popup-meta mt-2' role='group' aria-label='Conflict basic info'>
            <div><span class='ux-muted'>C1:</span> ${P(n.c1Name)}</div>
            <div><span class='ux-muted'>C2:</span> ${P(n.c2Name)}</div>
            <div><span class='ux-muted'>Category:</span> ${P(n.category)}</div>
            <div><span class='ux-muted'>Start:</span> ${P(Ut(n.start))}</div>
            <div><span class='ux-muted'>End:</span> ${P(Ut(n.end))}</div>
            <div><span class='ux-muted'>Wars:</span> ${n.wars}</div>
            <div><span class='ux-muted'>Active wars:</span> ${n.activeWars}</div>
            <div><span class='ux-muted'>C1 dealt:</span> ${P(St(n.c1Dealt))}</div>
            <div><span class='ux-muted'>C2 dealt:</span> ${P(St(n.c2Dealt))}</div>
            <div><span class='ux-muted'>Total dealt:</span> ${P(St(n.totalDealt))}</div>
            ${g?`<div><span class='ux-muted'>Pinned:</span> ${P((R=n.pinnedInfo)!=null?R:"")}</div>`:""}
          </div>
        `;wt(`${n.name} Details`,h);const _=Ke(String(a),Et.version.conflict_data);Pt(_).catch(()=>{});const y=Qe(String(a),Et.version.graph_data);Pt(y).catch(()=>{})}),U("openConflictPageFromCard",(e,a)=>{var i;mt(e);const n=document.getElementById("exampleModal"),o=Ye(n);(i=o==null?void 0:o.hide)==null||i.call(o),window.setTimeout(()=>{window.location.href=`${_t}/conflict?id=${a}`},80)}),U("formatPinnedAlliances",(e,a,n,o)=>{var g;if(t(b).size===((g=t(d))==null?void 0:g.alliance_ids.length))return"";const i=n[l.C1_ID],u=n[l.C2_ID],f=i.filter(h=>t(b).has(h)),A=u.filter(h=>t(b).has(h)),$=f.length+A.length;if($===0)return"<span class='ux-muted'>-</span>";let p=[];const m=(h,_,y)=>{var v;for(const E of h){if(p.length>=4)return;const N=(v=H[E])!=null?v:`AA:${E}`;p.push(`<span class='badge ${y}' title='${_}: ${N}'>${_}:${N}</span>`)}};return m(f,"C1","text-bg-primary"),m(A,"C2","text-bg-danger"),$>p.length&&p.push(`<span class='badge text-bg-secondary'>+${$-p.length}</span>`),`<span class='d-inline-flex flex-wrap gap-1'>${p.join("")}</span>`});let s=`https://locutus.s3.ap-southeast-2.amazonaws.com/conflicts/index.gzip?${Et.version.conflicts}`;Pt(s).then(e=>Zt(null,null,function*(){C(G,null),C(d,e),C(B,le(Et.version.conflicts,e.update_ms));let a=e.alliance_ids,n=e.alliance_names;for(let u=0;u<a.length;u++)H[a[u]]=nt(n[u],a[u]);let o=Be();const i=o.get("ids");if(i)for(const u of i.split("."))t(b).add(parseInt(u));else for(let u=0;u<a.length;u++)t(b).add(a[u]);C(Q,o.get("guild")||o.get("guild_id")),yield Ie(),pt(e,t(Q)),C(lt,!0),Tt(),ot(!1)})).catch(e=>{console.error("Failed to load conflicts data",e),C(G,"Could not load conflicts data. Please try again later."),C(lt,!0)})}catch(s){console.error("Error reading from S3 bucket:",s),C(G,"Could not load conflicts data. Please try again later.")}});function pt(s,e){var y,v,E,N,L,R,O,Y,tt,rt,et,gt,ct,I,ft,ht,Ct,At,It;let a=[...s.headers],n=[l.NAME,l.C1_NAME,l.C2_NAME,l.START,l.END,l.WARS,l.ACTIVE_WARS,l.C1_DEALT,l.C2_DEALT,l.CATEGORY],o=[l.NAME,l.CATEGORY,l.C1_NAME,l.C2_NAME],i={},u=[l.END+1,"desc"],f=s.conflicts;it={},t(b).size!=((y=t(d))==null?void 0:y.alliance_ids.length)&&(f=f.filter(T=>{const c=T[l.C1_ID],k=T[l.C2_ID];return c.some(q=>t(b).has(q))||k.some(q=>t(b).has(q))}));let A=a.indexOf("source"),$=s.source_sets,p=s.source_names,m=e&&$?$[e]:null;if(m){C(M,[p[e],parseFloat(e)]),t(M)[0]||te(M,t(M)[0]=e+" (None Featured)");let T=function(c){if(!m)return!0;let k=A==-1?0:c[A];return!k||k==0||m.includes(k)||parseFloat(e)==k||c[0]==parseInt(e)?!0:k==128};f=f.filter(T)}C(W,{});for(const T of f){const c=`${(v=T[l.CATEGORY])!=null?v:"uncategorized"}`;te(W,t(W)[c]=((E=t(W)[c])!=null?E:0)+1)}t(x).size===0?C(x,new Set(Object.keys(t(W)))):(C(x,new Set([...t(x)].filter(T=>t(W)[T]!=null))),t(x).size===0&&C(x,new Set(Object.keys(t(W))))),f=f.filter(T=>{var k;const c=`${(k=T[l.CATEGORY])!=null?k:"uncategorized"}`;return t(x).has(c)});for(let T=0;T<f.length;T++){let c=f[T],k=c[l.NAME];Bt[k]=[c[l.C1_ID],c[l.C2_ID]],c[l.C1_NAME],c[l.C2_NAME];const q=c[l.ID],$e=c[l.C1_ID],ye=c[l.C2_ID],Te=$e.filter(V=>t(b).has(V)),Ee=ye.filter(V=>t(b).has(V)),qt=Te.map(V=>{var bt;return(bt=H[V])!=null?bt:`AA:${V}`}).slice(0,4),Jt=Ee.map(V=>{var bt;return(bt=H[V])!=null?bt:`AA:${V}`}).slice(0,4),Xt=t(b).size!==((N=t(d))==null?void 0:N.alliance_ids.length),$t=[];Xt&&qt.length>0&&$t.push(`C1: ${qt.join(", ")}`),Xt&&Jt.length>0&&$t.push(`C2: ${Jt.join(", ")}`),it[q]={name:k,c1Name:(L=c[l.C1_NAME])!=null?L:"N/A",c2Name:(R=c[l.C2_NAME])!=null?R:"N/A",category:`${(O=c[l.CATEGORY])!=null?O:"uncategorized"}`,start:(Y=c[l.START])!=null?Y:0,end:(tt=c[l.END])!=null?tt:-1,wars:(rt=c[l.WARS])!=null?rt:0,activeWars:(et=c[l.ACTIVE_WARS])!=null?et:0,c1Dealt:(gt=c[l.C1_DEALT])!=null?gt:0,c2Dealt:(ct=c[l.C2_DEALT])!=null?ct:0,totalDealt:((I=c[l.C1_DEALT])!=null?I:0)+((ft=c[l.C2_DEALT])!=null?ft:0),pinnedInfo:$t.length>0?$t.join(" | "):null,wiki:(ht=c[l.WIKI])!=null?ht:null,status:(Ct=c[l.STATUS])!=null?Ct:null,cb:(At=c[l.CB])!=null?At:null,posts:c[l.POSTS]}}Wt=f,a.push("total");const g=t(b).size!==((It=t(d))==null?void 0:It.alliance_ids.length);g&&a.push("pinned"),f=f.map(T=>{const c=T[l.C1_DEALT]+T[l.C2_DEALT];return g?[...T,c,""]:[...T,c]});const h=g?a.length-1:-1;g&&n.push(h),i.formatUrl=[l.NAME],i.formatNumber=[l.WARS,l.ACTIVE_WARS],i.formatMoney=[l.C1_DEALT,l.C2_DEALT,l.TOTAL],i.formatDate=[l.START,l.END],g&&(i.formatPinnedAlliances=[h]);let _=document.getElementById("conflictTable");vt={columns:a,data:f,visible:n,searchable:o,cell_format:i,row_format:(T,c,k)=>{let q=c[5];q==-1?T.classList.add("bg-danger-subtle"):q<Date.now()-432e6?T.classList.add("bg-light-subtle"):T.classList.add("bg-warning-subtle")},sort:u},ta(_,vt)}function ie(s){const a=s.target.value,n=t(d).source_names[a];C(M,[n,a]),C(Q,a==="0"?null:a),se("guild",a==="0"?null:a),Tt(),pt(t(d),a),ot(!0)}function oe(s){const e=s.trim();return e?/^https?:\/\//i.test(e)?e:`https://politicsandwar.fandom.com/wiki/${encodeURIComponent(e)}`:"#"}function mt(s){s&&(s.preventDefault(),s.stopPropagation())}function Ut(s){return s===-1?"Ongoing":!s||Number.isNaN(s)?"N/A":new Date(s).toLocaleString()}function St(s){return!s||Number.isNaN(s)?"$0":`$${Math.round(s).toLocaleString()}`}function Gt(s,e){var n,o;const a=document.createElement("div");if(e==="status")a.innerHTML=`<ul class='m-0'><li>${(n=s.status)!=null?n:"N/A"}</li></ul>`;else if(e==="cb")a.innerHTML=`<ul class='m-0'><li>${(o=s.cb)!=null?o:"N/A"}</li></ul>`;else{const i=s.posts,u=document.createElement("ul");u.className="m-0";let f=!1;i&&typeof i=="object"&&Object.entries(i).forEach(([A,$])=>{var y;const p=$,m=document.createElement("li"),g=Array.isArray(p)?p[0]:null,h=Array.isArray(p)&&(y=p[1])!=null?y:A,_=Array.isArray(p)?p[2]:null;if(g!=null){const v=document.createElement("a");v.href=`https://forum.politicsandwar.com/index.php?/topic/${g}`,v.target="_blank",v.rel="noopener noreferrer",v.textContent=h,m.appendChild(v)}else m.textContent=h;if(typeof _=="number"){const v=document.createElement("small");v.className="text-muted ms-2",v.textContent=le("",_).replace("Version:  • ","").replace("Version: ",""),m.appendChild(v)}u.appendChild(m),f=!0}),f?a.appendChild(u):a.innerHTML="<ul class='m-0'><li>No posts available</li></ul>"}return a.outerHTML}function Ht(s,e){const a=P(s);return`<button type='button' class='btn ux-btn btn-sm fw-bold me-2' onclick='openConflictCard(undefined,${e})' aria-label='Back to conflict actions for ${a}' title='Back to actions'><i class='bi bi-arrow-left'></i></button>${a}`}function P(s){return s.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;")}function re(s){const e=new Set(t(x));if(e.has(s)){if(e.size===1)return;e.delete(s)}else e.add(s);C(x,e),pt(t(d),t(Q)),ot(!0)}function ce(s){t(b).has(s)?t(b).delete(s):t(b).add(s),Vt()}function de(){for(let s=0;s<t(d).alliance_ids.length;s++){let e=t(d).alliance_ids[s];t(b).has(e)?t(b).delete(e):t(b).add(e)}Vt()}function Vt(){C(b,t(b)),se("ids",Array.from(t(b)).join("."),{replace:!0}),Tt(),pt(t(d),t(Q)),ot(!0)}function ue(){t(d)&&(C(b,new Set(t(d).alliance_ids)),C(Q,null),C(M,["All",0]),C(x,new Set),C(Z,""),We(["ids","guild","guild_id"]),Tt(),pt(t(d),null),ot(!0))}function pe(){window.location.reload()}function ot(s){const e=document.getElementById("visjs");if(t(lt)&&t(d)&&(e&&e.getAttribute("data-loaded")||typeof jt()!="undefined")){const a=document.getElementById("visualization");if(!a)return;if(a.hasChildNodes()){if(!s)return;a.innerHTML=""}const n=jt(),o=new n.DataSet;let i=Date.now(),u=0;const f=t(d).alliance_ids.length!=t(b).size;Wt.forEach(p=>{if(f&&!p[l.C1_ID].some(y=>t(b).has(y))&&!p[l.C2_ID].some(y=>t(b).has(y)))return;const m=p[l.NAME],g=p[l.START],h=p[l.END];i=Math.min(i,g),u=Math.max(u,h==-1?Date.now():h);const _=`${_t}/conflict?id=${p[l.ID]}`;o.add({id:p[l.ID],content:`<a href="${_}" target="_blank" title="${m}">${m}</a>`,start:g,end:h===-1?Date.now():h})});const A={start:i,end:u,height:"75vh",width:"100%",zoomKey:"ctrlKey",orientation:"top",verticalScroll:!0},$=new n.Timeline(a,o,A);$.addCustomTime(i,"t1"),$.addCustomTime(u,"t2")}}function me(s){s.target.setAttribute("data-loaded","true"),ot(!1)}ke(()=>(t(d),t(b),t(W),t(x),t(Q),t(Z)),()=>{C(X,(()=>{if(!t(d))return!1;const s=t(b).size===t(d).alliance_ids.length,e=Object.keys(t(W)),a=t(x).size===e.length&&e.every(n=>t(x).has(n));return!s||!!t(Q)||t(Z).trim().length>0||!a})())}),Le(),Se();var Nt=ua();Fe("fz0r3g",s=>{var e=ea(),a=yt(e);w(a),Pe(()=>{Oe.title="Conflicts"}),at("load",a,me),F(s,e)});var xt=D(Nt),kt=D(xt),fe=D(kt);{let s=Re(()=>[{label:"Home",href:`${_t}/`},{label:"Conflicts"}]);Ge(fe,{get items(){return t(s)}})}Lt(2),S(kt);var be=w(kt,2);{var _e=s=>{var e=sa(),a=D(e),n=w(D(a),2),o=D(n);o.value=o.__value="0";var i=w(o);Rt(i,1,()=>(t(d),K(()=>Object.entries(t(d).source_names))),Ot,(u,f)=>{var A=Mt(()=>ee(t(f),2));let $=()=>t(A)[0],p=()=>t(A)[1];var m=aa(),g=D(m,!0);S(m);var h={};st(()=>{var _;ne(m,($(),t(M),K(()=>$()==t(M)[1]))),dt(g,p()),h!==(h=$())&&(m.value=(_=m.__value=$())!=null?_:"")}),F(u,m)}),S(n),Lt(2),S(a),S(e),st(()=>ne(o,(t(M),K(()=>t(M)[1]==0)))),at("change",n,ie),F(s,e)};J(be,s=>{t(d),K(()=>t(d)&&t(d).source_names)&&s(_e)})}S(xt);var Kt=w(xt,2);{var ve=s=>{Je(s)};J(Kt,s=>{t(lt)||s(ve)})}var Qt=w(Kt,2);{var ge=s=>{var e=na(),a=D(e),n=D(a,!0);S(a);var o=w(a,2);S(e),st(()=>dt(n,t(G))),at("click",o,pe),F(s,e)};J(Qt,s=>{t(G)&&s(ge)})}var Yt=w(Qt,2);{var he=s=>{var e=ca(),a=yt(e),n=D(a),o=w(D(n),4);Rt(o,1,()=>(t(W),K(()=>Object.entries(t(W)))),Ot,(_,y)=>{var v=Mt(()=>ee(t(y),2));let E=()=>t(v)[0],N=()=>t(v)[1];var L=la();let R;var O=D(L),Y=w(O),tt=D(Y,!0);S(Y),S(L),st(rt=>{var et;R=Ft(L,1,"btn btn-sm fw-bold",null,R,rt),dt(O,`${(et=E())!=null?et:""} `),dt(tt,N())},[()=>({"ux-btn":t(x).has(E()),"btn-outline-secondary":!t(x).has(E())})]),at("click",L,()=>re(E())),F(_,L)});var i=w(o,2);{var u=_=>{var y=ia();Lt(4),F(_,y)};J(i,_=>{t(b),t(d),K(()=>t(b).size!==t(d).alliance_ids.length)&&_(u)})}S(n),S(a);var f=w(a,2),A=D(f),$=w(D(A));let p;S(A);var m=w(A,2);Xe(m,{onReset:ue,get resetDirty(){return t(X)}}),S(f);var g=w(f,2);{var h=_=>{var y=ra(),v=yt(y);je(v);var E=w(v,4),N=D(E),L=w(N,4);Rt(L,1,()=>(t(d),K(()=>t(d).alliance_ids)),Ot,(R,O,Y)=>{var tt=De(),rt=yt(tt);{var et=ct=>{var I=oa();let ft;var ht=D(I,!0);S(I),st((Ct,At)=>{ft=Ft(I,1,"btn ux-btn btn-sm ms-1 mb-1",null,ft,Ct),dt(ht,At)},[()=>({active:t(b).has(t(O))}),()=>(ae(nt),t(d),t(O),K(()=>nt(t(d).alliance_names[Y],t(O))))]),at("click",I,()=>ce(t(O))),F(ct,I)},gt=Mt(()=>(ae(nt),t(d),t(O),t(Z),K(()=>nt(t(d).alliance_names[Y],t(O)).toLowerCase().includes(t(Z).toLowerCase()))));J(rt,ct=>{t(gt)&&ct(et)})}F(R,tt)}),S(E),Ue(v,()=>t(Z),R=>C(Z,R)),at("click",N,()=>de()),F(_,y)};J(g,_=>{t(ut)&&_(h)})}st(()=>p=Ft($,1,"bi",null,p,{"bi-chevron-down":!t(ut),"bi-chevron-up":t(ut)})),at("click",A,()=>C(ut,!t(ut))),F(s,e)};J(Yt,s=>{t(d)&&s(he)})}var Ce=w(Yt,6);{var Ae=s=>{var e=da(),a=D(e,!0);S(e),st(()=>dt(a,t(B))),F(s,e)};J(Ce,s=>{t(B)&&s(Ae)})}S(Nt),F(r,Nt),Me()}export{Ta as component};
