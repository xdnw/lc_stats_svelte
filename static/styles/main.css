@import url('https://fonts.googleapis.com/css2?family=Chakra+Petch:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap');

:root {
    --ux-bg: #f5f7fb;
    --ux-surface: #ffffff;
    --ux-surface-alt: #f7f9ff;
    --ux-surface-elevated: #ffffff;
    --ux-text: #1a2233;
    --ux-text-muted: #5f6b85;
    --ux-border: #d9e0ef;
    --ux-brand: #4f6cff;
    --ux-brand-2: #7f56d9;
    --ux-accent: #16b8a5;
    --ux-danger: #e15656;
    --ux-warning: #e99b33;
    --ux-success: #2fa66a;
    --ux-shadow-sm: 0 2px 8px rgba(15, 28, 52, 0.08);
    --ux-shadow-md: 0 8px 26px rgba(15, 28, 52, 0.12);
    --ux-radius-sm: 0.5rem;
    --ux-radius-md: 0.85rem;
    --ux-radius-lg: 1.2rem;
}

html[data-bs-theme="dark"] {
    --ux-bg: #0c111d;
    --ux-surface: #131b2d;
    --ux-surface-alt: #182338;
    --ux-surface-elevated: #1d2a40;
    --ux-text: #e7ecff;
    --ux-text-muted: #9ca9c6;
    --ux-border: #2d3b56;
    --ux-brand: #8ca2ff;
    --ux-brand-2: #bca1ff;
    --ux-accent: #5fd6c8;
    --ux-danger: #ff7d7d;
    --ux-warning: #ffbe69;
    --ux-success: #57c982;
    --ux-shadow-sm: 0 2px 12px rgba(0, 0, 0, 0.3);
    --ux-shadow-md: 0 8px 30px rgba(0, 0, 0, 0.4);
}

body {
    background: radial-gradient(1300px 700px at 20% -20%, color-mix(in srgb, var(--ux-brand) 8%, transparent), transparent),
        radial-gradient(1000px 600px at 95% -35%, color-mix(in srgb, var(--ux-brand-2) 10%, transparent), transparent),
        var(--ux-bg);
    color: var(--ux-text);
    font-family: 'Chakra Petch', sans-serif;
    line-height: 1.3;
}

a:not(.btn),
a:not(.btn):link,
a:not(.btn):visited {
    color: var(--ux-brand);
    text-decoration-thickness: 1px;
    text-underline-offset: 1px;
}

a:not(.btn):hover {
    color: color-mix(in srgb, var(--ux-brand) 85%, white);
}

.app-shell .btn,
.app-shell a.btn {
    color: var(--ux-text);
}

.app-shell .navbar,
.app-shell footer,
.app-shell .ux-surface,
.app-shell .card,
.app-shell .alert,
.app-shell .dropdown-menu,
.app-shell .offcanvas {
    border-color: var(--ux-border) !important;
}

.ux-surface {
    background: color-mix(in srgb, var(--ux-surface) 94%, transparent);
    backdrop-filter: blur(8px);
    border: 1px solid var(--ux-border);
    border-radius: 0.65rem;
    box-shadow: var(--ux-shadow-sm);
}

.ux-toolbar {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    flex-wrap: wrap;
    margin-bottom: 0.5rem;
}

.ux-btn {
    border-radius: 0.45rem !important;
    border: 1px solid color-mix(in srgb, var(--ux-brand) 36%, var(--ux-border)) !important;
    color: var(--ux-text) !important;
    background: color-mix(in srgb, var(--ux-surface-alt) 82%, transparent) !important;
    font-weight: 700 !important;
}

.ux-btn:hover {
    color: var(--ux-text) !important;
    background: color-mix(in srgb, var(--ux-brand) 18%, var(--ux-surface-alt)) !important;
    border-color: color-mix(in srgb, var(--ux-brand) 60%, var(--ux-border)) !important;
}

.ux-btn.active,
.ux-btn:active,
.app-shell .btn.active.ux-btn,
.ux-toggle-btn.active {
    color: #fff !important;
    background: linear-gradient(145deg, color-mix(in srgb, var(--ux-brand) 90%, #fff), color-mix(in srgb, var(--ux-brand-2) 64%, var(--ux-brand))) !important;
    border-color: color-mix(in srgb, var(--ux-brand) 65%, var(--ux-brand-2)) !important;
    box-shadow: 0 0 0 0.13rem color-mix(in srgb, var(--ux-brand) 18%, transparent) !important;
}

html[data-bs-theme="dark"] .ux-btn.active,
html[data-bs-theme="dark"] .ux-btn:active,
html[data-bs-theme="dark"] .app-shell .btn.active.ux-btn,
html[data-bs-theme="dark"] .ux-toggle-btn.active {
    color: var(--ux-text) !important;
    background: color-mix(in srgb, var(--ux-brand) 24%, var(--ux-surface-elevated)) !important;
    border-color: color-mix(in srgb, var(--ux-brand) 46%, var(--ux-border)) !important;
    box-shadow: none !important;
}

.ux-tabstrip {
    margin-top: 0;
}

.ux-tabstrip .btn,
.ux-tabstrip a.btn {
    color: var(--ux-text) !important;
    background: color-mix(in srgb, var(--ux-surface-alt) 84%, transparent);
    border-color: var(--ux-border);
    border-radius: 0 !important;
    border-top-left-radius: 0 !important;
    border-top-right-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
}

.ux-tabstrip .btn.border-bottom-0,
.ux-tabstrip a.btn.border-bottom-0,
.ux-tabstrip .btn.bg-light-subtle,
.ux-tabstrip a.btn.bg-light-subtle {
    color: #fff !important;
    background: linear-gradient(145deg, color-mix(in srgb, var(--ux-brand) 90%, #fff), color-mix(in srgb, var(--ux-brand-2) 64%, var(--ux-brand))) !important;
    border-color: color-mix(in srgb, var(--ux-brand) 65%, var(--ux-brand-2)) !important;
}

html[data-bs-theme="dark"] .ux-tabstrip .btn.border-bottom-0,
html[data-bs-theme="dark"] .ux-tabstrip a.btn.border-bottom-0,
html[data-bs-theme="dark"] .ux-tabstrip .btn.bg-light-subtle,
html[data-bs-theme="dark"] .ux-tabstrip a.btn.bg-light-subtle {
    color: var(--ux-text) !important;
    background: color-mix(in srgb, var(--ux-brand) 24%, var(--ux-surface-elevated)) !important;
    border-color: color-mix(in srgb, var(--ux-brand) 46%, var(--ux-border)) !important;
}

.ux-tabstrip + .ux-surface,
.ux-tabstrip + ul.ux-surface,
.ux-tabstrip + div.ux-surface {
    border-top: 0 !important;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
}

.ux-tab-panel {
    border-top: 0 !important;
    border-top-left-radius: 0 !important;
    border-top-right-radius: 0 !important;
}

.ux-btn-primary {
    background: linear-gradient(145deg, color-mix(in srgb, var(--ux-brand) 88%, #fff), color-mix(in srgb, var(--ux-brand-2) 65%, var(--ux-brand))) !important;
    border-color: color-mix(in srgb, var(--ux-brand) 70%, var(--ux-brand-2)) !important;
    color: #fff !important;
}

.ux-btn-primary:hover {
    filter: brightness(1.05);
}

html[data-bs-theme="dark"] .ux-btn-primary {
    color: var(--ux-text) !important;
    background: color-mix(in srgb, var(--ux-brand) 26%, var(--ux-surface-elevated)) !important;
    border-color: color-mix(in srgb, var(--ux-brand) 50%, var(--ux-border)) !important;
}

.ux-callout {
    border-radius: var(--ux-radius-sm);
    padding: 0.5rem 0.75rem;
    background: color-mix(in srgb, var(--ux-danger) 10%, var(--ux-surface));
    color: color-mix(in srgb, var(--ux-danger) 75%, var(--ux-text));
    border: 1px solid color-mix(in srgb, var(--ux-danger) 35%, var(--ux-border));
}

.ux-muted {
    color: var(--ux-text-muted) !important;
}

.ux-table-wrap {
    margin-top: 0.3rem;
    border: 1px solid var(--ux-border);
    background: color-mix(in srgb, var(--ux-surface) 90%, transparent);
    border-radius: var(--ux-radius-md);
    box-shadow: var(--ux-shadow-sm);
    overflow: hidden;
}

.table-toggles {
    border-radius: var(--ux-radius-sm);
    border: 1px dashed color-mix(in srgb, var(--ux-brand) 40%, var(--ux-border));
    background: color-mix(in srgb, var(--ux-surface-alt) 88%, transparent);
    padding: 0.65rem;
}

.table-toggles .toggle-vis {
    margin-right: 0.35rem;
    margin-bottom: 0.35rem !important;
}

.table-toggles .ux-toggle-btn {
    border-color: color-mix(in srgb, var(--ux-brand) 40%, var(--ux-border)) !important;
    color: var(--ux-text) !important;
    background: color-mix(in srgb, var(--ux-surface) 86%, transparent) !important;
}

.ux-toggle-btn {
    border: 1px solid color-mix(in srgb, var(--ux-brand) 48%, var(--ux-border)) !important;
    color: var(--ux-text) !important;
    background: color-mix(in srgb, var(--ux-surface) 90%, transparent) !important;
}

.dataTables_wrapper tfoot .ux-toggle-btn {
    border-color: color-mix(in srgb, var(--ux-brand) 56%, var(--ux-border)) !important;
    background: color-mix(in srgb, var(--ux-brand) 12%, var(--ux-surface)) !important;
}

.dataTables_wrapper tfoot .ux-toggle-btn:hover {
    background: color-mix(in srgb, var(--ux-brand) 20%, var(--ux-surface)) !important;
    color: var(--ux-text) !important;
}

.table-toggles .ux-toggle-btn:hover {
    background: color-mix(in srgb, var(--ux-brand) 15%, var(--ux-surface)) !important;
}

.table-toggles .ux-toggle-btn.is-hidden {
    opacity: 0.7;
    border-style: dashed;
}

.dataTables_wrapper {
    color: var(--ux-text);
}

.dataTables_wrapper table.dataTable thead th,
.dataTables_wrapper table.dataTable thead td {
    border-bottom-color: color-mix(in srgb, var(--ux-brand) 38%, var(--ux-border)) !important;
}

.dataTables_wrapper table.dataTable tbody tr {
    transition: background-color 140ms ease;
}

.dataTables_wrapper table.dataTable tbody tr:hover {
    background-color: color-mix(in srgb, var(--ux-brand) 9%, var(--ux-surface)) !important;
}

.dataTables_wrapper table.dataTable tbody tr.shown {
    background-color: color-mix(in srgb, var(--ux-brand) 11%, var(--ux-surface)) !important;
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
    border-radius: 0.45rem !important;
    border: 1px solid var(--ux-border) !important;
    color: var(--ux-text) !important;
    background: color-mix(in srgb, var(--ux-surface) 82%, transparent) !important;
    padding: 0.12rem 0.5rem !important;
    margin-left: 0.12rem !important;
}

.dataTables_wrapper .dataTables_paginate .paginate_button.current,
.dataTables_wrapper .dataTables_paginate .paginate_button:hover {
    border-color: color-mix(in srgb, var(--ux-brand) 60%, var(--ux-border)) !important;
    background: color-mix(in srgb, var(--ux-brand) 16%, var(--ux-surface)) !important;
    color: var(--ux-text) !important;
}

.dataTables_wrapper .dataTables_info,
.dataTables_wrapper .dataTables_paginate,
.dataTables_wrapper .dataTables_length,
.dataTables_wrapper .dataTables_filter {
    padding-top: 0.3rem !important;
    margin-bottom: 0.25rem !important;
}

.container-fluid > h1.ux-surface {
    padding: 0.45rem 0.75rem !important;
}

h1.ux-surface.ux-page-title {
    margin: 0 0 0.5rem 0 !important;
    padding: 0.45rem 0.75rem !important;
    line-height: 1.15;
    min-height: 2.35rem;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
}

.app-shell .input-group.ux-inputbar .input-group-text,
.app-shell .input-group.ux-inputbar .form-select,
.app-shell .input-group.ux-inputbar .btn {
    border-radius: 0 !important;
}

.app-shell .input-group.ux-inputbar > :first-child {
    border-top-left-radius: 0.5rem !important;
    border-bottom-left-radius: 0.5rem !important;
}

.app-shell .input-group.ux-inputbar > :last-child {
    border-top-right-radius: 0.5rem !important;
    border-bottom-right-radius: 0.5rem !important;
}

.dataTables_wrapper .dataTables_length select,
.dataTables_wrapper .dataTables_filter input,
.app-shell .form-control,
.app-shell .form-select,
.app-shell .form-control-sm {
    border-radius: var(--ux-radius-sm) !important;
    border-color: var(--ux-border) !important;
    background-color: color-mix(in srgb, var(--ux-surface) 90%, transparent) !important;
    color: var(--ux-text) !important;
}

.app-shell .form-control:focus,
.app-shell .form-select:focus,
.app-shell .btn:focus-visible,
.app-shell a:focus-visible {
    outline: none;
    box-shadow: 0 0 0 0.16rem color-mix(in srgb, var(--ux-brand) 24%, transparent) !important;
}

html[data-bs-theme="dark"] .app-shell .form-control:focus,
html[data-bs-theme="dark"] .app-shell .form-select:focus,
html[data-bs-theme="dark"] .app-shell .btn:focus-visible,
html[data-bs-theme="dark"] .app-shell a:focus-visible {
    box-shadow: 0 0 0 0.12rem color-mix(in srgb, var(--ux-brand) 14%, transparent) !important;
}

.app-shell .dropdown-menu {
    background: color-mix(in srgb, var(--ux-surface-elevated) 95%, transparent);
    border-radius: var(--ux-radius-sm);
    box-shadow: var(--ux-shadow-sm);
    z-index: 25000;
}

.app-shell .dropdown-item {
    color: var(--ux-text);
}

.app-shell .dropdown-item:hover {
    background-color: color-mix(in srgb, var(--ux-brand) 14%, transparent);
}

/* Shared compact style for svelte-select (used by bubble + tiering) */
.select-compact {
    --border-radius: 0px;
    --height: 24px;
    --chevron-height: 0px;
    --multi-item-height: 20px;
    --value-container-padding: 0px;
    --multi-select-input-margin: 0px;
    --multi-select-padding: 0px 4px 0px 4px;
    --item-padding: 0px 4px 0px 4px;

    --border: 1px solid var(--ux-border);
    --background: color-mix(in srgb, var(--ux-surface) 94%, transparent);
    --list-background: color-mix(in srgb, var(--ux-surface-elevated) 96%, transparent);
    --list-z-index: 25000;

    --item-color: var(--ux-text);
    --item-hover-color: var(--ux-text);
    --item-is-active-color: var(--ux-text);
    --input-color: var(--ux-text);

    --item-hover-bg: color-mix(in srgb, var(--ux-brand) 18%, var(--ux-surface-elevated));
    --item-active-background: color-mix(in srgb, var(--ux-brand) 24%, var(--ux-surface-elevated));
    --item-is-active-bg: color-mix(in srgb, var(--ux-brand) 34%, var(--ux-surface-elevated));

    --multi-item-color: var(--ux-text);
    --multi-item-bg: color-mix(in srgb, var(--ux-brand) 10%, var(--ux-surface));
    --placeholder-color: var(--ux-text-muted);
    --indicator-color: var(--ux-text);

    position: relative;
    z-index: 80;
}

.select-compact .list,
.select-compact .svelte-select-list {
    z-index: 5000 !important;
}

.select-compact input,
.select-compact .item,
.select-compact .multi-item-text,
.select-compact .value-container {
    color: var(--ux-text) !important;
}

.app-shell .table {
    --bs-table-bg: transparent;
    --bs-table-color: var(--ux-text);
    --bs-table-border-color: var(--ux-border);
}

.app-shell .table thead {
    --bs-table-bg: color-mix(in srgb, var(--ux-brand) 15%, var(--ux-surface));
}

.bd-footer {
    background: transparent !important;
}

.bd-footer .ux-surface {
    background: transparent !important;
    border: 0 !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    backdrop-filter: none !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
}

.vis-item-content {
    padding: 2px 0 2px 0 !important;
    font-size: 10px;
}


html[data-bs-theme="dark"] .vis-item {
    background-color: #23314a;
    color: #fff;
    border: 1px solid #385071;
}

@media (max-width: 768px) {
    body {
        line-height: 1.28;
    }

    .ux-toolbar {
        gap: 0.35rem;
    }
}

.ux-coalition-panel {
    background: color-mix(in srgb, var(--ux-surface-alt) 92%, transparent);
    border: 1px solid var(--ux-border);
    border-radius: 0.5rem;
    padding: 0.5rem;
    margin-bottom: 0.4rem;
}

.ux-coalition-panel--compact {
    padding: 0.3rem 0.45rem;
    margin-bottom: 0.25rem;
}

.ux-coalition-panel--red {
    border-left: 0.25rem solid color-mix(in srgb, var(--ux-danger) 62%, var(--ux-border));
}

.ux-coalition-panel--blue {
    border-left: 0.25rem solid color-mix(in srgb, var(--ux-brand) 62%, var(--ux-border));
}